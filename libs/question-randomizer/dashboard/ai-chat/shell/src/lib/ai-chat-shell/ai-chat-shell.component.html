<div class="ai-chat-container">
  <div class="chat-header">
    <h2>AI Chat Assistant</h2>
    @if (chatStore.currentConversation(); as conversation) {
      <span class="conversation-title">{{ conversation.title }}</span>
    }
  </div>

  <div class="chat-messages">
    @if (chatStore.currentConversationMessages().length > 0) {
      @for (message of chatStore.currentConversationMessages(); track message.id) {
        <lib-chat-message [message]="{role: message.role, content: message.content, timestamp: message.timestamp}" />
      }
    } @else if (chatStore.isLoading()) {
      <p>Loading messages...</p>
    } @else {
      <p class="empty-state">No messages yet. Start a conversation!</p>
    }
  </div>

    <lib-chat-input
      [disabled]="chatStore.isSending()"
      (messageSent)="onSendMessage($event)"
    />
</div>
